<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Daniel Shaw" /></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Daniel Shaw</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <a class="page-link" href="/">Blog</a><a class="page-link" href="/portfolio">Portfolio</a><a class="page-link" href="/speaking">Speaking</a></div>
      </nav><p class="site-description">Software QA. I also develop things at the weekend.</p>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
        <h2>When is a wifi connection not a wifi connection?
        </h2>
    </header>

    <div class="post-content e-content" itemprop="articleBody">
        <p>So, when building apps we always check that the app fails correctly with the correct error message when the phone is offline. But what if the phone reports as being online, but the data isn’t what you expect it to be?</p>

<p>This is a common state, and a very common case of this happening is when the user receives a <a href="https://en.wikipedia.org/wiki/Captive_portal">captive portal</a>, usually when first connecting to a public wifi. We need to ensure that the app doesn’t behave in unexpected ways in this case.</p>

<p>There’s a way you can check this, without needing to visit your local cafe. It can be checked with <a href="https://www.charlesproxy.com/">Charles Proxy</a>. (If you don’t have this tool, then you should go and get it. It’s pretty awesome)</p>

<p>Once you’ve got Charles Proxy up and running, and your device talking to the proxy (there’s instructions elsewhere on <a href="https://www.charlesproxy.com/documentation/faqs/using-charles-from-an-iphone/">how to connect your phone to Charles Proxy</a>), you can use the Map Local tool test this scenario.</p>

<ul>
  <li>First, you’ll need to create your “portal” to return. This can be something as simple as a text file, or as complex as a full webpage. The tool will return any file you give it.</li>
  <li>Then, in Charles Proxy, go to <code class="highlighter-rouge">Tools -&gt; Map Local</code></li>
  <li>Ensure that <code class="highlighter-rouge">Enable Map Local</code> is switched on</li>
  <li>Click <code class="highlighter-rouge">Add</code> to create a new rule</li>
  <li>You don’t need to fill in all these fields: I’ve got this feature working by completing the “Protocol” and “Host” fields inside the <code class="highlighter-rouge">Map From</code> section, and “Local path” from <code class="highlighter-rouge">Map To</code>.
    <ul>
      <li>Inside <code class="highlighter-rouge">Protocol</code> and <code class="highlighter-rouge">Host</code> I enter the domain of the URL I want to overwrite (eg. “http” and “thatdamnqa.com”)</li>
      <li>Inside <code class="highlighter-rouge">Local path</code> I enter the path of the file I want to send instead</li>
    </ul>
  </li>
</ul>

<p><em>This blog post was written as part of <a href="https://club.ministryoftesting.com/t/sprint-1-a-technical-tip-all-testers-should-know/14619">Ministry of Testing’s Blogger’s Club</a>.</em></p>

    </div><div class="post-meta"><p>May 13, 2018 &middot; <a href="/blog/2018-05/when-is-a-wifi-connection-not-a-wifi-connection">Permalink</a></p></div>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
      <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/thatdamnqa" title="thatdamnqa"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a href="https://twitter.com/thatdamnqa" title="thatdamnqa"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li><li><a href="/feed.xml" title="RSS"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg></a></li>
</ul>
</div>
  </div>
</footer>
</body>

</html>
