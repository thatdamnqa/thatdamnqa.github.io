<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Daniel Shaw" /></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Daniel Shaw</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <a class="page-link" href="/">Blog</a><a class="page-link" href="/portfolio">Portfolio</a><a class="page-link" href="/speaking">Speaking</a></div>
      </nav><p class="site-description">Software QA. I also develop things at the weekend.</p>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home"><div class="post">

        <h2>
          <a class="post-link" href="/blog/2015-06/apple-watch-review">★ &nbsp;Apple Watch In Review</a>
        </h2>
        <p>It’s been around 6 weeks since I’ve had my Apple Watch. Whilst not perfect, I’m still very happy with it. Here’s a rundown of my thoughts.</p>

<p>I’ve got the 38mm Sport edition, with the black sports band. It’s a lot smaller than I imagined it would be, which is for the better. This means that it doesn’t have the bulk of other smart watches, and after the first few days I don’t feel conspicuous at all.</p>

<p>Not only does it look good, it feels really nice too. In fact, you forget it’s even there. There is a bulge at the bottom where the sensors sit, which I thought may be a problem, but that isn’t the case at all.</p>

<p>This is something I never thought would be said in a watch review: the sports band is really quite soft too. It’s firm enough to feel secure, but also smooth so that the last thing you’re thinking as you put it on is “I’m basically wearing a rubber band around my wrist”.</p>

<p>I have to admit, the box was a little bigger than I was expecting: the Watch comes in a case just like any other watch on the market. Unlike other smart watches, this is not a gadget. Apple clearly wants this to be an accessory: using technology to change how we think of watches.</p>

<p>And what a watch it is. Granted, this isn’t something that is kept for generations – I expect the Watch to have an update cycle of about five years – but I truly think that this is a watch wearer’s watch. Unlike the Pebble, which doesn’t really have much in terms of quality watchfaces, the Apple Watch has carefully designed faces that look beautiful and are genuinely useful.</p>

<p>But what makes this better than a regular watch, and indeed other smart watches, is the notifications. Within minutes I had muted all sounds, and had turned off both sound and vibration on my phone. The taptic engine is very subtle, and it really does feel like someone tapping you on the wrist. It feels nice, and it doesn’t disturb you or anybody else.</p>

<p>One thing, however, that does make it frustrating as a watch is Activation on Wrist Raise. With a classic watch, the time is always there for you to glance at. The Apple Watch requires you move your wrist, then wait, to see the time. The gesture detection isn’t quite right either, and so you find yourself exaggerating your arm movement, especially when wearing a coat.</p>

<p>The slight sluggishness is a problem in other areas, too. Apps can often take a noticable time to load; even the glances can take time for the data to appear. But being a first generation device I can’t see this being a problem for too long.</p>

<p>Sluggishness aside, compatibility with apps and services is at a high level, especially considering the watch has only been on general sale for a couple of months. Requiring a pairing with an iPhone has been a really smart move: Watch apps can talk to Phone apps, which means that any data you can access on your phone you can access on your wrist.</p>

<p>However, the best integration so far in my book has to be with Health. I put the activiy rings as a complication on my watchface, and whenever I look at my Watch, I know how active I am being, and how close I am to my goal. This is the feature which I’m sure I would miss if I had to do without my Apple Watch.</p>

<p>So, would I recommend it? Absolutely. Especially if you are a watch wearer and a heavy user of iPhone apps, the Apple Watch is a genuinely useful second screen, and turns the timepiece on your wrist into a “Watch Plus”.</p>

<p>It’s a purchase I don’t regret at all. I wouldn’t go back to my Pebble Watch, and certainly wouldn’t go back to a regular watch. The Apple Watch gives me far too many advantages that improves my life in small ways.</p>

<p>But then again, I’m a gadget lover. And if you’re not into gadgets, I’m not sure that you will see the point behind the Apple Watch. And that’s ok: it’s not for everybody.</p>

<div class="post-meta"><p>Jun 23, 2015 &middot; <a href="/blog/2015-06/apple-watch-review">Permalink</a></p></div>
      </div><div class="post">

        <h2>
          <a class="post-link" href="/blog/2014-08/achieving-ken-burns-effect-using-css">Achieving the Ken Burns effect using CSS</a>
        </h2>
        <p>The <a href="http://en.wikipedia.org/wiki/Ken_Burns_Effect">Ken Burns effect</a> is a common technique used in video-making where
a photograph or image is zoomed in and panned across, to make for more interesting visuals.</p>

<p>This effect can now be achieved using CSS’s animations properties. I’ve made up some example code to give a basic
demonstration of what can be achieved.</p>

<p>To be able to pan across an image, we would need to use a size that’s bigger (either taller or wider) than we’ll be
showing on the page, and we need to use CSS to tell the browser not to try and squeeze the image to the size we gave it.
We use the object-fit property alongside setting a <code class="highlighter-rouge">width</code>, <code class="highlighter-rouge">height</code>, and <code class="highlighter-rouge">overflow</code> property to do this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>img:hover {
    object-fit: cover;
    overflow: hidden;
    width: 300px;
    height: 300px;
}
</code></pre></div></div>

<p>Once we’ve done that, we need to do the effect! This is achieved using CSS animations. Here, I’ve used CSS classes
which I give the image to create two different animations depending on whether the image is a landscape or portrait
image: each will pan in a different direction (across or up).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.portrait {
    animation: portrait 30s;
}
@keyframes portrait {
    from {
        object-position: bottom;
    } to {
        object-position: top;
    }
}

.landscape{
    animation: landscape 30s;
}
@keyframes landscape {
    from {
        object-position: left;
    } to {
        object-position: right;
    }
}
</code></pre></div></div>

<p>Notice that I’ve used unprefixed attributes here, but some browsers may need to be prefixed, or may not support either animations or object-fit.</p>
<div class="post-meta"><p>Aug 2, 2014 &middot; <a href="/blog/2014-08/achieving-ken-burns-effect-using-css">Permalink</a></p></div>
      </div><div class="post">

        <h2>
          <a class="post-link" href="/blog/2014-01/mocking-phpunit">Mocking in phpunit</a>
        </h2>
        <p>To test a class in PHPUnit, it’s easier if you use dependency injection which enables you to mock other classes that
we aren’t interested in testing (such as your database layer). So for example, instead of writing code like this to
test a made-up User class:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class User() {
    private $db;

    function __construct()
    {
        $this-&gt;db = new Database;
    }

    function getUserData()
    {
        return $this-&gt;db-&gt;getUserData();
    }
}

$user = new User();
</code></pre></div></div>

<p>We can pass in the database class instead:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class User() {
    private $db;

    function __construct($db) {
        $this-&gt;db = $db;
    }

    function getUserById($userid) {
        return $this-&gt;db-&gt;getUserData($userid);
    }
}

$db = new Database; $user = new User($db);
</code></pre></div></div>

<p>This means that we can mock the Database object when we’re testing the User class, and pass the former into the latter.
We do this as PHPUnit won’t override the new keyword.</p>

<p>In PHPUnit, it’s a case of creating the class but in place of using the new keyword we use a slightly longer one instead:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$mockDb = $this-&gt;getMock( 'Database', array('getUserData') );
$mockDb-&gt;expects($this-&gt;any())
                      -&gt;method('getUserData')
                      -&gt;with('joebloggs')
                      -&gt;will($this-&gt;returnValue(
                          array('userid' =&gt; 'joebloggs', 'name' =&gt; 'Joe Bloggs')
                 );

$user = new User($mockDb);
$this-&gt;assertEquals( $user-&gt;getUserById('joebloggs'), array('joebloggs', 'Joe Bloggs') )
</code></pre></div></div>

<p>In a nutshell, those two commands says what the class should be, and what the method should expect and return
respectively. To break down what each bit of the two commands do:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">getMock()</code> is saying mock the class given in the 1st parameter, and we want to return given values for the methods
 given in the array in the 2nd parameter</p>
  </li>
  <li>
    <p>The second command has a bit more too it. <code class="highlighter-rouge">expects($this-&gt;any())</code> will mean that it doesn’t matter whether the
 method gets called or not: changing it to <code class="highlighter-rouge">expects($this-&gt;once())</code> will mean that if the method isn’t called (or is
 called more than once) the test will fail</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">with()</code> is the parameters that you should expect to be passed in (which is a good way to check that the parameters
 that’s being passed into a particular method are sensible), and <code class="highlighter-rouge">will($this-&gt;returnValue())</code> is what you want to give as
 the known return value, for when you do your test</p>
  </li>
</ul>

<p>Of course, there’s much more you can do with PHPUnit mocking. The documentation is a pretty good start to find out what else is there.</p>
<div class="post-meta"><p>Jan 9, 2014 &middot; <a href="/blog/2014-01/mocking-phpunit">Permalink</a></p></div>
      </div><div class="post">

        <h2>
          <a class="post-link" href="/blog/2013-09/setting-proxy-command-line-os-x">Setting the proxy for command-line OS X</a>
        </h2>
        <p>In OS X, it’s pretty simple to set a Location to set a proxy for whenever you’re somewhere you need to use one</p>

<p>However, this doesn’t affect some commandline applications, such as Homebrew. If you want to send this through a proxy,
you’ll have to edit <code class="highlighter-rouge">.curlrc</code> to read something like</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proxy = proxy.example.com:8080
</code></pre></div></div>
<div class="post-meta"><p>Sep 21, 2013 &middot; <a href="/blog/2013-09/setting-proxy-command-line-os-x">Permalink</a></p></div>
      </div><div class="post">

        <h2>
          <a class="post-link" href="/blog/2013-08/files-not-loading-virtualbox-virtual-machine">Files not loading in a Virtualbox virtual machine</a>
        </h2>
        <p>Every so often, randomly I see a problem where a virtual machine will only partly load a CSS or Javascript file, and
when you load it in the browser it will have a bunch of strange unicode characters in there</p>

<p>We even <a href="https://joindin.jira.com/browse/JOINDIN-318">saw it in joind.in</a></p>

<p>The fix is fairly simple - just edit your vhost configuration and add the following lines:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EnableMMAP Off
EnableSendfile Off
</code></pre></div></div>
<div class="post-meta"><p>Aug 22, 2013 &middot; <a href="/blog/2013-08/files-not-loading-virtualbox-virtual-machine">Permalink</a></p></div>
      </div><div class="post">

        <h2>
          <a class="post-link" href="/blog/2013-07/switching-branches-subversion-without-losing-changes">Switching branches in Subversion without losing changes</a>
        </h2>
        <p>The problem: you want to switch branches in Subversion, but you’ve got changes in your local code that you’re not ready
to commit</p>

<p>The solution: export a patch that you can store somewhere safe (or even commit into the repo so others can see it or
work on it)</p>

<p>To export all changes, use svn diff to create a patch file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>svn diff &gt; fix-that-annoying-bug.diff
</code></pre></div></div>

<p>As a sidenote, if I’m using a bug tracker, I like to put the bug ID in the filename: not only does this keep all the
different projects together, it makes it easy to know what exactly the code changes does:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>svn diff &gt; myproject-1234-fix-that-annoying-bug.diff
</code></pre></div></div>

<p>From there I can revert all changes and switch branch:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>svn revert -R . svn switch http://svn.example.com/my-new-branch/
</code></pre></div></div>

<p>Once I’m done with the new branch and want to go back, and assuming I’ve committed all my changes I switch back to my
old branch:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>svn switch http://svn.example.com/my-original-branch/
</code></pre></div></div>

<p>And I import my original changes patch file to start work again, carrying on from where I left off:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>patch -p0 -i fix-that-annoying-bug.diff
</code></pre></div></div>
<div class="post-meta"><p>Jul 25, 2013 &middot; <a href="/blog/2013-07/switching-branches-subversion-without-losing-changes">Permalink</a></p></div>
      </div><div class="post">

        <h2>
          <a class="post-link" href="/blog/2010-08/problems-attributes-not-working-ie-and-opera">Problems with attributes not working in IE and Opera?</a>
        </h2>
        <p>So, what did I do with my bank holiday weekend? I was intrigued by some odd Opera and IE behaviour — that’s what.</p>

<p>I was presented with a site whose styling wasn’t working for certain tags. It was an odd one. I thought it might be an
absolute positioning bug, but testing was bringing up nothing – why on earth would simple CSS styling, nothing special,
fail completely in Opera?</p>

<p>Then I took a closer look at the source — and something caught my eye. There was some malformed HTML:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1 title="test""style="background-color: #ccc"&gt;Test&lt;/h1&gt;
</code></pre></div></div>

<p>Gotcha! Removing that innocent looking multiple quote fixed the problem. But I still wasn’t happy. Browsers should
recognise and fix badly formed HTML, no? It’s not like a closing tag was completely missing. So I made a basic HTML
template with little more than the h1 tag you see above, and just enough HTML5 to make it validate.</p>

<p>Then I played around with it. What happens if I add a space?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1 title="test"" style="background-color: #ccc"&gt;Test&lt;/h1&gt;
</code></pre></div></div>

<p>That fixed it. Hm. Why on earth would the lack of space break things? Lacking a space is completely fine in both HTML
and XHTML. Let’s remove the space again, and test some more. What if I replace the rogue “ with another character
– say $?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1 title="test"$style="background-color: #ccc"&gt;Test&lt;/h1&gt;
</code></pre></div></div>

<p>Wait — that’s a turnout for the books — it now breaks in Chrome. Then it dawned on me. If I replace that dollar sign
with a normal alphanumeric character — the character ‘a’:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1 title="test"astyle="background-color: #ccc"&gt;Test&lt;/h1&gt;
</code></pre></div></div>

<p>That’s it! Without the space between attributes, Opera and Internet Explorer are treating <code class="highlighter-rouge">"style</code> as the attribute,
with Webkit and Gecko being smart and removing the extra quote. Add the space, and Webkit does the same. Obvious when
you think about it, isn’t it?</p>

<p>So that’s what I did with my bank holiday weekend. What did you do?</p>
<div class="post-meta"><p>Aug 29, 2010 &middot; <a href="/blog/2010-08/problems-attributes-not-working-ie-and-opera">Permalink</a></p></div>
      </div><div class="post">

        <h2>
          <a class="post-link" href="/blog/2010-01/reusing-primary-keys-mysql">Reusing primary keys in MySQL</a>
        </h2>
        <p>I’ve recently had need to reuse the primary key for a table whenever a row gets deleted, for example if a row of ID 5 gets deleted, the next entry will re-use the ID of 5. Usually this causes problems with foreign keys, but as no other table had a foreign key linked to this table, it would cause no problems.</p>

<p>The biggest hurdle was finding what the first missing primary key actually is. This takes a bit of SQL, but the following almost gets it:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT MIN(table.id + 1) AS nextID FROM table LEFT JOIN table t1 ON table.id + 1 = t1.id WHERE t1.id IS NULL
</code></pre></div></div>

<p>I say almost, because if row/id 1 is deleted, the above code won’t catch it. I’m afraid that you’ll have to use <code class="highlighter-rouge">SELECT</code> to check for this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT count(id) FROM table WHERE id = 1
</code></pre></div></div>

<p>If the value is 0, then you know you need to create row id 1.</p>

<p>And that’s it. All you need to do is throw this together into a MySQL function (or a php function if you’re not feeling adventurous), and you have the lowest unused primary key all ready for you to put into your <code class="highlighter-rouge">INSERT</code> line.</p>
<div class="post-meta"><p>Jan 21, 2010 &middot; <a href="/blog/2010-01/reusing-primary-keys-mysql">Permalink</a></p></div>
      </div></ul>
    

    <!-- pagination -->
    
    <div class="pagination">
        
            <a href="/page5/">‹ Prev</a>
        

        
            
                <a href="/">1</a>
            
        
            
                <a href="/page2/">2</a>
            
        
            
                <a href="/page3/">3</a>
            
        
            
                <a href="/page4/">4</a>
            
        
            
                <a href="/page5/">5</a>
            
        
            
                <span class="webjeda">6</span>
            
        

        
            <span>Next &raquo;</span>
        
    </div>
    
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
      <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/thatdamnqa" title="thatdamnqa"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a href="https://twitter.com/thatdamnqa" title="thatdamnqa"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li><li><a href="/feed.xml" title="RSS"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg></a></li>
</ul>
</div>
  </div>
</footer>
</body>

</html>
